@namespace Authentication.Client.Library.Components

@inherits MvvmComponentBase<ProfilViewModel>

@if (string.IsNullOrEmpty(UserEmail))
{
    <MudText>A felhasználó meghatározása még nem sikerült!</MudText>
}
else
{
    <MudBreadcrumbs Items="_items" Separator=">"></MudBreadcrumbs>

    <MudCard>
        @if (ViewModel is null || ! ViewModel.IsValidUser)
        {
            <MudAlert>A profil adatok megjelenítése nem lehetséges!</MudAlert>
        }
        else
        {
            <MudForm 
                Model="ViewModel"
            >
                <MudCardContent>
                    <MudTextField @bind-Value="ViewModel.LastName"                              
                                    Immediate=true
                                    Required="true"
                                    RequiredError="A vezetéknév szükséges!"
                                    Label="Vezetéknév" 
                                    ReadOnly="@ViewModel.IsReadOnly"
                                    />
                    <MudTextField @bind-Value="ViewModel.FirstName"
                                    Immediate=true
                                    Required="true"
                                    RequiredError="A keresztnév szükséges!"
                                    Label="Keresztnév"
                                    ReadOnly="@ViewModel.IsReadOnly"
                                    />
                    <MudTextField @bind-Value="ViewModel.Email"
                                    Immediate=true
                                    Required="true"
                                    Disabled="true"
                                    RequiredError="Az email cím szükséges!"
                                    InputType="InputType.Email"
                                    Label="Email" 
                                    />
                </MudCardContent>
                <MudCardActions>
                    @if (ViewModel.IsReadOnly)
                    {
                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="ViewModel.ChangeToModify">Módosítás</MudButton>
                    }
                    else
                    {
                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="ViewModel.UpdateProfil">Mentés</MudButton>
                        <MudButton Class="ml-2" Variant="Variant.Filled" Color="Color.Secondary" OnClick="ViewModel.ChangeToReadOnly">Mégsem</MudButton>
                    }
                </MudCardActions>
            </MudForm>
        }
    </MudCard>
}
