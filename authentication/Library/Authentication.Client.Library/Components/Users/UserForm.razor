@namespace Authentication.Client.Library.Components

@inherits MvvmItemComponentBase<User, MvvmCrudViewModelBase<User>>

<MudPaper Class="py-4 px-4">
	@if (ViewModel is not null && ViewModel.SelectedItem is not null && Validation is not null)
	{
		<MudForm Model="ViewModel.SelectedItem" @ref="_form" Validation="Validation.ValidateValue">
            <MudCardContent>
                @if (ViewModel.ErrorStore.HasError)
                {
                    <MudChip class="pt-2 d-flex justify-content-center" Color="Color.Error">
                        <p>@ViewModel.ErrorStore.Error</p>
                    </MudChip>
                }
                <MudTextField @bind-Value="ViewModel.SelectedItem.LastName"
                              For="@( () => ViewModel.SelectedItem.LastName)"
                              Immediate=true
                              Required="true"
                              RequiredError="A vezetéknév szükséges!"
                              Label="Vezetéknév"
                              HelperText="Vezetéknév" />
                <MudTextField @bind-Value="ViewModel.SelectedItem.FirstName"
                              For="@( () => ViewModel.SelectedItem.FirstName)"
                              Immediate=true
                              Required="true"                              
                              RequiredError="A keresztnév szükséges!"
                              Label="Keresztnév"
                              HelperText="Keresztnév" />
                <MudTextField @bind-Value="ViewModel.SelectedItem.Email"
                              For="@( () => ViewModel.SelectedItem.Email)"
                              Disabled="true"
                              ReadOnly="true"
                              Immediate=true
                              Required="true"
                              RequiredError="Az email cím szükséges!"
                              InputType="InputType.Email"
                              Label="Email"
                              HelperText="Email" />
             </MudCardContent>
             <MudCardActions>
                <MudButton Variant="Variant.Filled" Color="Color.Primary"  Disabled="@ViewModel.IsBusy" OnClick="ViewModel.UpdateAsync">Mentés</MudButton>
                <MudButton Class="ml-2" Variant="Variant.Filled" Color="Color.Error" Disabled="@ViewModel.IsBusy" OnClick="@( async () => await DeleteAsync())">Visszaállítás</MudButton>
                <MudButton Class="ml-2" Variant="Variant.Filled" Color="Color.Secondary" Disabled="@ViewModel.IsBusy" OnClick="ViewModel.ResetData">Visszaállítás</MudButton>
                <MudButton Class="ml-2" Variant="Variant.Filled" Color="Color.Secondary" Disabled="@ViewModel.IsBusy" OnClick="GoBack">Vissza</MudButton>
            </MudCardActions>
		</MudForm>
	}
</MudPaper>
